<div class="profile">
  <div class="profile-header">
    <div class="logo">
      <img id="logo-img" src="../../../../assets/images/logo.png" />
    </div>

    <div class="search" nz-col nzSpan="6" nzAlign="center" nzJustify="center">
      <nz-input-group nzSearch [nzAddOnAfter]="suffixIconButton">
        <input
          class="search-bar"
          type="text"
          nz-input
          placeholder="search item"
        />
      </nz-input-group>
      <ng-template #suffixIconButton>
        <button nz-button nzType="primary" nzSearch class="search-btn">
          <mat-icon>search</mat-icon>
        </button>
      </ng-template>
    </div>

    <div class="btn-container">
      <button class="button" mat-mini-fab color="accent" (click)="logOut()">
        <mat-icon class="btn-icon">exit_to_app</mat-icon>
      </button>

      <button
        class="button"
        mat-mini-fab
        color="accent"
        (click)="goToAboutPage()"
      >
        <mat-icon class="btn-icon">info_outline</mat-icon>
      </button>
    </div>
  </div>

  <div>
    <p id="welcome-message">Bine ai venit, {{ loggedInUsername }}</p>
  </div>

  <div class="main-content">
    <div class="account">
      <ul>
        <li>
          <a href="../profile"> Contul meu </a>
        </li>
        <li>
          <a href="../wishlist/"> Lista de dorinte </a>
        </li>
        <li>
          <a href="../cart"> Cos de cumparaturi </a>
        </li>
        <li>
          <a href="../main-page"> Inapoi la pagina principala </a>
        </li>
      </ul>
    </div>

    <div id="personal-info">
      <nz-collapse>
        <nz-collapse-panel [nzHeader]="date" [nzActive]="true" *ngFor="let item of User">
          <table>
            <tr>
              <td>Nume</td>
            </tr>
            <tr>
              <td>{{ item.lastName }}</td>
            </tr>
            <tr>
              <td>Prenume</td>
            </tr>
            <tr>
              <td>{{ item.firstName }}</td>
            </tr>
            <tr>
              <td>Adresa e-mail</td>
            </tr>
            <tr>
              <td>{{ item.emailAddress }}</td>
            </tr>
            <tr>
              <td>Telefon</td>
            </tr>
            <tr>
              <td>{{ item.phoneNo }}</td>
            </tr>
          </table>
          <button class="modify-btn">Modifica datele</button>
        </nz-collapse-panel>
        <nz-collapse-panel [nzHeader]="date1" [nzActive]="false" >
          <ng-container *ngIf="UserAddress.length === 0; else userAddressContent">
            <p>Nu există adrese disponibile.</p>
          </ng-container>
          <ng-template #userAddressContent>
          <table *ngFor="let item1 of UserAddress">
              <tr>
                <td>Nume prenume</td>
              </tr>
              <tr>
                <td>{{ item1.name }}</td>
              </tr>

              <tr>
                <td>Telefon</td>
              </tr>
              <tr>
                <td>{{ item1.phoneNo }}</td>
              </tr>
              <tr>
                <td>Adresa</td>
              </tr>
              <tr>
                <td>{{ item1.addressLine }}</td>
              </tr>
            </table>
            <button class="modify-btn">Modifica datele</button>
          </ng-template>
        </nz-collapse-panel>
        <nz-collapse-panel [nzHeader]="date2" [nzActive]="false">
          <button>Utilizeaza adresa ta</button>
          <table>
            <tr>
              <td>Nume, prenume</td>
            </tr>
            <tr>
              <td>Popa Elena-Livia</td>
            </tr>
            <tr>
              <td>Telefon</td>
            </tr>
            <tr>
              <td>0730282401</td>
            </tr>
            <tr>
              <td>Adresa</td>
            </tr>
            <tr>
              <td>sat Plavia, com. Iordaceanu, jud. PH, nr 122, bl. 122</td>
            </tr>
          </table>
          <button class="modify-btn">Modifica datele</button>
        </nz-collapse-panel>
      </nz-collapse>
    </div>

    <div id="history">
      <div class="order-history">
        <span>Istoric comenzi</span>
      </div>
      <table *ngIf="OrderHistory.length > 0; else noDataMessage">
        <thead>
          <tr>
            <th>Id comanda</th>
            <th>Data</th>
            <th>Total plata</th>
            <th>Status</th>
            <th class="table-btn"></th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let item of OrderHistory">
            <td class="td">{{ item.orderId }}</td>
            <td class="td">{{ item.date }}</td>
            <td class="td">{{ item.totalPrice }}</td>
            <td class="td">{{ item.status }}</td>
            <td class="table-btn"><button>Detalii</button></td>
          </tr>
        </tbody>
      </table>

      <ng-template #noDataMessage>
        <p>Nu există comenzi inregistrate.</p>
      </ng-template>
    </div>
  </div>
</div>
